# bitbucket-pipelines.yml
image: node:22

options:
  max-time: 20
  size: 2x

pipelines:
  default:
    - step:
        name: Install, Lint & Test
        caches:
          - node
        script:
          - echo "ğŸ›  Installing dependencies..."
          - npm ci --legacy-peer-deps
          - echo "ğŸ” Linting..."
          - npm run lint
          - echo "ğŸ§ª Running tests..."
          - npm run test:ci
        artifacts:
          - coverage/**
definitions:
  caches:
    node: ~/.npm
